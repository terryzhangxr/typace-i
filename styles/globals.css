@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* 浅色模式变量 */
    --color-bg-primary: #ffffff;
    --color-text-primary: #2d2d2d;
    --color-text-secondary: #737373;
    --color-link: #3b82f6;
    --color-link-hover: #2563eb;
    --color-border: #e5e7eb;
    --color-code-bg: #f3f4f6;
    --color-code-text: #1f2937;
    --color-quote-bg: #f9fafb;
    --color-quote-border: #e5e7eb;
    --color-table-header-bg: #f3f4f6;
    --color-table-row-bg: #ffffff;
    --color-table-row-hover-bg: #f9fafb;

    /* Waline 浅色模式变量 */
    --wl-color-bg: var(--color-bg-primary);
    --wl-color-card-bg: var(--color-table-row-bg);
    --wl-color-text: var(--color-text-primary);
    --wl-color-border: var(--color-border);
    --wl-color-btn-bg: var(--color-code-bg);
    --wl-color-btn-hover-bg: var(--color-code-text);
  }

  .dark {
    /* 深色模式变量 */
    --color-bg-primary: #1a1a1a;
    --color-text-primary: #ffffff;
    --color-text-secondary: #d1d5db;
    --color-link: #93c5fd;
    --color-link-hover: #bfdbfe;
    --color-border: #4b5563;
    --color-code-bg: #1f2937;
    --color-code-text: #f3f4f6;
    --color-quote-bg: #374151;
    --color-quote-border: #4b5563;
    --color-table-header-bg: #1f2937;
    --color-table-row-bg: #111827;
    --color-table-row-hover-bg: #1a202c;

    /* Waline 深色模式变量 */
    --wl-color-bg: var(--color-bg-primary);
    --wl-color-card-bg: var(--color-table-row-bg);
    --wl-color-text: var(--color-text-primary);
    --wl-color-border: var(--color-border);
    --wl-color-btn-bg: var(--color-code-bg);
    --wl-color-btn-hover-bg: var(--color-code-text);
  }

  /* 基础样式 */
  body {
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
    transition:
      background-color 0.3s ease,
      color 0.3s ease,
      border-color 0.3s ease;
  }

  /* 文章内容样式 */
  .prose {
    color: var(--color-text-primary);
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    color: var(--color-text-primary);
  }

  .prose a {
    color: var(--color-link);
    transition: color 0.3s ease;
  }

  .prose a:hover {
    color: var(--color-link-hover);
  }

  .prose p {
    color: var(--color-text-primary);
  }

  .prose strong {
    color: var(--color-text-primary);
  }

  .prose em {
    color: var(--color-text-primary);
  }

  .prose blockquote {
    @apply border-l-4 pl-4 italic;
    background-color: var(--color-quote-bg);
    border-color: var(--color-quote-border);
    color: var(--color-text-primary);
    transition:
      background-color 0.3s ease,
      border-color 0.3s ease;
  }

  .prose ul,
  .prose ol {
    color: var(--color-text-primary);
  }

  .prose li {
    color: var(--color-text-primary);
  }

  .prose hr {
    @apply border-t;
    border-color: var(--color-border);
    transition: border-color 0.3s ease;
  }

  /* 代码块样式 */
  .prose pre {
    @apply rounded-xl border p-6 relative;
    background-color: var(--color-code-bg);
    border-color: var(--color-border);
    color: var(--color-code-text);
    transition:
      background-color 0.3s ease,
      border-color 0.3s ease;
  }

  .prose code {
    @apply px-2 py-1 rounded;
    background-color: var(--color-code-bg);
    color: var(--color-code-text);
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  .prose code::before,
  .prose code::after {
    content: '';
  }

  /* 代码块语言标签 */
  .code-language-label {
    @apply bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm px-3 py-1 rounded-t-lg;
    font-family: monospace;
    display: inline-block;
    position: absolute;
    top: -1.5rem;
    right: 0;
  }

  /* 表格样式 */
  .prose table {
    @apply w-full border-collapse my-6;
    border-color: var(--color-border);
    transition: border-color 0.3s ease;
  }

  .prose th,
  .prose td {
    @apply p-3 text-left align-top border;
    border-color: var(--color-border);
    color: var(--color-text-primary);
    transition:
      background-color 0.3s ease,
      border-color 0.3s ease;
  }

  .prose th {
    @apply font-semibold;
    background-color: var(--color-table-header-bg);
  }

  .prose tr {
    background-color: var(--color-table-row-bg);
    transition: background-color 0.3s ease;
  }

  .prose tr:nth-child(even) {
    background-color: var(--color-table-row-hover-bg);
  }

  .prose tr:hover {
    background-color: var(--color-table-row-hover-bg);
  }

  /* Waline 评论组件覆盖 */
  .wl-card {
    background: var(--wl-color-card-bg) !important;
    color: var(--wl-color-text) !important;
    border-color: var(--wl-color-border) !important;
  }

  .wl-editor {
    background: var(--wl-color-card-bg) !important;
  }

  .wl-btn {
    background: var(--wl-color-btn-bg) !important;
    color: var(--wl-color-text) !important;
  }

  .wl-btn:hover {
    background: var(--wl-color-btn-hover-bg) !important;
  }

  /* 移动端适配 */
  @media (max-width: 640px) {
    .prose table {
      @apply block overflow-x-auto;
      white-space: nowrap;
    }
  }
}

/* 页面容器动画 */
.page-container {
  opacity: 0;
  transform: translateY(100px);
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.page-container.mounted {
  opacity: 1;
  transform: translateY(0);
}

/* 性能优化 */
@media (prefers-reduced-motion: no-preference) {
  .page-container {
    animation-duration: 0.6s;
  }
}
